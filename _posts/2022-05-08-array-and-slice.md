---

layout: single  
title: "Array，slice and dict"  
date: 2022-05-08 23:28:00 +0800   
categories: Go Go-Base

---
* 数组类型的值（以下简称数组）的长度是固定的，而切片类型的值（以下简称切片）是可变长的。
* 数组的长度在声明的时候给定，数组的长度是其类型的一部分。
* Go 语言中属于引用类型的有切片类型、字典类型、通道类型、函数类型等。
* Go 语言中属于值类型的有基础数据类型、数组类型以及结构体类型。
* 一个切片的容量可以被看作是透过这个窗口最多可以看到的底层数组中元素的个数。
* 切片代表的窗口是无法向左扩展的。
* 切片扩容时会生成新的底层数组，在无需扩容时，append函数返回的是指向原底层数组的原切片，而在需要扩容时，append函数返回的是指向新底层数组的新切片。
* Go 语言的链表实现在标准库的container/list代码包中。这个代码包中有两个公开的程序实体——List和Element，List 实现了一个双向链表（以下简称链表），而 Element 则代表了链表中元素的结构。
* 切片的一大好处是可以让我们通过窗口快速地定位并获取，或者修改底层数组中的元素。
* 通过键值根据哈希函数获取哈希值，每个哈希桶都会把自己包含的所有键的哈希值存起来。Go 语言会用被查找键的哈希值与这些哈希值逐个对比，看看是否有相等的。如果一个相等的都没有，那么就说明这个桶中没有要查找的键值，这时 Go 语言就会立刻返回结果了。如果有相等的，再比较键值本身，相等的话提取键值对。字典不会独立存储任何键的值，但会独立存储它们的哈希值。Go 语言字典的键类型不可以是函数类型、字典类型和切片类型。
* Go 语言规范规定，在键类型的值之间必须可以施加操作符==和!=。换句话说，键类型的值必须要支持判等操作。由于函数类型、字典类型和切片类型的值并不支持判等操作，所以字典的键类型不能是这些类型。如果键的类型是接口类型的，那么键值的实际类型也不能是上述三种类型，否则在程序运行过程中会引发 panic（即运行时恐慌）。比如：
	
	```
	var badMap2 = map[interface{}]int{
	  "1":   1,
	  []int{2}: 2, // 这里会引发panic。
	  3:    3,
	}
	```
	**注意**：上述代码编译通过，但会造成运行时panic
	
* 对数组类型的值求哈希实际上是依次求得它的每个元素的哈希值并进行合并，所以速度就取决于它的元素类型以及它的长度。（不推荐使用，因为数组的元素可修改）
* 求哈希和判等操作的速度越快，对应的类型就越适合作为键类型。
* 优先选用数值类型和指针类型作为键值，通常情况下类型的宽度越小越好。如果非要选择字符串类型的话，最好对键值的长度进行额外的约束。
* 在一个值为nil的字典中添加键 - 元素对的时候，Go 语言的运行时系统就会立即抛出一个 panic。（即可读，不可写）

