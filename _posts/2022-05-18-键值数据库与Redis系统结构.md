---

layout: single  
title: "键值数据库与Redis系统结构"  
date: 2022-05-18 12:17:00 +0800   
categories: Redis Redis-Base

---

# 键值数据库设计要素

* 数据模型：比如字典，列表，字符串，集合，有序集合等。
* 操作接口（操作模块）：比如增删改查。
* 存储形式（存储模块）：
	* 分配器：（比如常用内存分配器glibc 的 malloc 和 free，glibc 的分配器在处理随机的大小内存块分配时，表现并不好。一旦保存的键值对数据规模过大，就可能会造成较严重的内存碎片问题。）分配器是键值数据库中的一个关键因素。对于以内存存储为主的 Redis 而言，这点尤为重要。Redis 的内存分配器提供了多种选择，分配效率也不一样。
	* 持久化：
* 访问方式：
	* 网络模块：比如 socket server
	* 函数库模块：例如，RocksDB 以动态链接库的形式使用，而 Memcached 和 Redis 则是通过网络框架访问。ß
* 索引模块：是让键值数据库根据 key 找到相应 value 的存储位置，进而执行操作。例如，Memcached 和 Redis 采用哈希表作为 key-value 索引，而 RocksDB 则采用跳表作为内存中 key-value 的索引。
* 像Redis这些键值数据库无法支持复杂的聚合计算，因为它只提供简单的操作接口。
* 不同键值数据库支持的 key 类型一般差异不大，而 value 类型则有较大差别。键值数据库进行选型时，一个重要的考虑因素是它支持的 value 类型。例如，Memcached 支持的 value 类型仅为 String 类型，而 Redis 支持的 value 类型包括了 String、哈希表、列表、集合等。Redis 能够在实际业务场景中得到广泛的应用，就是得益于支持多样化类型的 value。

# Redis系统结构

* 两大维度”就是指系统维度和应用维度，“三大主线”也就是指高性能、高可靠和高可扩展（可以简称为“三高”）

	![redis知识网络](/assets/img/redis知识网络.jpg)
	
* 高性能主线：包括线程模型、数据结构、持久化、网络框架；
* 高可靠主线：包括主从复制、哨兵机制；
* 高可扩展主线：包括数据分片、负载均衡。

