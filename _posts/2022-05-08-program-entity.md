---

layout: single  
title: "Program entity of Go"  
date: 2022-05-08 23:28:00 +0800   
categories: Go Go-Base

---

* Go 语言中的程序实体包括变量、常量、函数、结构体和接口。Go语言是静态类型语言，声明变量或者常量需指定类型。
* 变量的类型可以是其预定义的那些类型，也可以是程序自定义的函数、结构体或接口。
* 类型推断：`var name = "mgl"`
* 短变量声明，只能在函数内部使用：`name := "mgl"`
* 类型推断的好处：代码重构
* Go 语言是静态类型的，在初始化变量时确定了它的类型，之后就不可能再改变，类型的确定是在编译期完成的。
* 变量重声明：

	```
	var name string 
	err, name := func() (error, string) {
		return "mgl", nil 
	}()
	```
* 程序实体的访问权限有三种：包级私有的、模块级私有的和公开的。
* 代码块查找变量顺序：当前=》上一层
* 可重命名变量与变量重声明区别：变量重声明中的变量一定是在某一个代码块内的；可重命名变量涉及的变量存在多个代码块中。
* 类型断言判断一个变量的类型：x.(T)， x必须为接口类型，比如：

	```
	value, ok := interface{}(container).([]string)
	```
**注意**：如果去掉ok的，当判断为否时就会引发异常。 
* 类型转换可参考[Go 语言规范中的转换](https://golang.google.cn/ref/spec#Conversions)   
* 把一个整数值转换为一个string类型的值是可行的，但被转换的整数值应该可以代表一个有效的 Unicode 代码点，否则转换的结果将会是"�"（仅由高亮的问号组成的字符串值）。字符'�'的 Unicode 代码点是U+FFFD。它是 Unicode 标准中定义的 Replacement Character，专用于替换那些未知的、不被认可的以及无法展示的字符，比如：

	```
	string(-1)
	```
**注意**：由于-1肯定无法代表一个有效的 Unicode 代码点，所以得到的总会是"�"
* string类型与各种切片类型转换，比如一个值在从string类型向[]rune类型转换时代表着字符串会被拆分成一个个 Unicode 字符：

	```
	string([]rune{'\u4F60', '\u597D'}) // 你好
	```
* 别名类型：别名类型与其源类型的区别恐怕只是在名称上，它们是完全相同的。别名类型主要是为了代码重构而存在的。

	```
	type MyString = string
	```
* 类型再定义：

	```
	type MyString2 string // 注意，这里没有等号。
	```
**注意**：string可以被称为MyString2的**潜在类型**。潜在类型的含义是，某个类型在本质上是哪个类型。潜在类型相同的不同类型的值之间是可以进行类型转换的。但对于集合类的类型[]MyString2与[]string来说这样做却是不合法的，因为[]MyString2与[]string的潜在类型不同，分别是[]MyString2和[]string。另外，即使两个不同类型的潜在类型相同，它们的值之间也不能进行判等或比较，它们的变量之间也不能赋值。